<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradify - Hitung IP & IPK Kumulatif</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles-bg">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    <!-- Top Bar -->
    <nav class="top-nav glass-effect">
        <div class="container">
            <div class="nav-brand">
                <i class="fa-solid fa-graduation-cap glow-icon"></i>
                <h1 class="gradient-text animate-float">Gradify</h1>
            </div>
            <div class="nav-actions">
                <button onclick="showCharts()" class="btn-icon glow-btn" title="Charts">
                    <i class="fa-solid fa-chart-line"></i>
                </button>
                <button onclick="showAchievements()" class="btn-icon glow-btn" title="Achievements">
                    <i class="fa-solid fa-trophy"></i>
                </button>
                <button onclick="showShareCard()" class="btn-icon glow-btn" title="Share">
                    <i class="fa-solid fa-share-nodes"></i>
                </button>
                <button onclick="toggleTheme()" class="btn-icon glow-btn" title="Toggle Theme">
                    <i class="fa-solid fa-moon" id="themeIcon"></i>
                </button>
                <button onclick="exportPDF()" class="btn-icon glow-btn" title="Export PDF">
                    <i class="fa-solid fa-file-pdf"></i>
                </button>
                <button onclick="resetAll()" class="btn-icon glow-btn" title="Reset Semua">
                    <i class="fa-solid fa-rotate-right"></i>
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Summary Card -->
        <div class="summary-card glass-effect glow-card animate-slide-up">
            <div class="summary-header">
                <h2>üìä Ringkasan Akademik</h2>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <button onclick="showOverallAI()" class="btn-ai-overall">
                        <i class="fa-solid fa-brain"></i>
                        AI Insights
                    </button>
                    <div class="pulse-dot"></div>
                </div>
            </div>
            <div class="summary-grid">
                <div class="summary-item highlight shine-effect">
                    <div class="summary-icon pulse-glow">
                        <i class="fa-solid fa-chart-line"></i>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">IPK Kumulatif</span>
                        <span class="summary-value gradient-text" id="totalIPK">0.00</span>
                    </div>
                </div>
                <div class="summary-item shine-effect">
                    <div class="summary-icon">
                        <i class="fa-solid fa-book"></i>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Total SKS</span>
                        <span class="summary-value" id="totalSKS">0</span>
                    </div>
                </div>
                <div class="summary-item shine-effect">
                    <div class="summary-icon">
                        <i class="fa-solid fa-calendar"></i>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Total Semester</span>
                        <span class="summary-value" id="totalSemesters">0</span>
                    </div>
                </div>
                <div class="summary-item shine-effect">
                    <div class="summary-icon">
                        <i class="fa-solid fa-trophy"></i>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Predikat</span>
                        <span class="summary-value" id="predikat">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Stats Dashboard -->
        <div id="quickStats" class="quick-stats-card glass-effect glow-card" style="display: none;">
            <div class="stats-header">
                <h2>üìà Quick Stats</h2>
                <button onclick="toggleQuickStats()" class="btn-close-stats">√ó</button>
            </div>
            <div class="stats-grid-quick">
                <div class="stat-quick">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-content">
                        <span class="stat-label">IP Tertinggi</span>
                        <span class="stat-value" id="highestIP">-</span>
                    </div>
                </div>
                <div class="stat-quick">
                    <div class="stat-icon">üìâ</div>
                    <div class="stat-content">
                        <span class="stat-label">IP Terendah</span>
                        <span class="stat-value" id="lowestIP">-</span>
                    </div>
                </div>
                <div class="stat-quick">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-content">
                        <span class="stat-label">IP Rata-rata</span>
                        <span class="stat-value" id="avgIP">-</span>
                    </div>
                </div>
                <div class="stat-quick">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-content">
                        <span class="stat-label">Total Nilai A</span>
                        <span class="stat-value" id="totalA">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Semester Button -->
        <div class="add-semester-section">
            <button onclick="addSemester()" class="btn-add-semester ripple-effect">
                <i class="fa-solid fa-plus rotate-on-hover"></i>
                Tambah Semester Baru
            </button>
            <button onclick="toggleQuickStats()" class="btn-show-stats">
                <i class="fa-solid fa-chart-simple"></i>
                Quick Stats
            </button>
        </div>

        <!-- Semesters List -->
        <div id="semestersList"></div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state">
            <i class="fa-solid fa-inbox"></i>
            <h3>Belum Ada Data</h3>
            <p>Klik tombol "Tambah Semester Baru" untuk mulai menghitung IPK kamu!</p>
        </div>
    </div>

    <!-- Add Course Modal -->
    <div id="courseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah Mata Kuliah</h3>
                <button onclick="closeCourseModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nama Mata Kuliah</label>
                    <input type="text" id="courseName" placeholder="Masukkan Nama Mata Kuliah">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>SKS</label>
                        <input type="number" id="courseSKS" min="1" max="6" placeholder="3">
                    </div>
                    <div class="form-group">
                        <label>Nilai</label>
                        <select id="courseGrade">
                            <option value="">Pilih Nilai</option>
                            <option value="4.0">A (4.0)</option>
                            <option value="3.7">A- (3.7)</option>
                            <option value="3.3">B+ (3.3)</option>
                            <option value="3.0">B (3.0)</option>
                            <option value="2.7">B- (2.7)</option>
                            <option value="2.3">C+ (2.3)</option>
                            <option value="2.0">C (2.0)</option>
                            <option value="1.7">C- (1.7)</option>
                            <option value="1.3">D+ (1.3)</option>
                            <option value="1.0">D (1.0)</option>
                            <option value="0.0">E (0.0)</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeCourseModal()" class="btn-secondary">Batal</button>
                <button onclick="saveCourse()" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Charts Modal -->
    <div id="chartsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><i class="fa-solid fa-chart-line"></i> Progress Charts</h3>
                <button onclick="closeChartsModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="chart-container">
                    <canvas id="ipChart"></canvas>
                </div>
                <div class="chart-container" style="margin-top: 30px;">
                    <canvas id="gradeChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievementsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fa-solid fa-trophy"></i> Achievements</h3>
                <button onclick="closeAchievementsModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div id="achievementsList"></div>
            </div>
        </div>
    </div>

    <!-- Share Card Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fa-solid fa-share-nodes"></i> Share Your Progress</h3>
                <button onclick="closeShareModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div id="shareCard" class="share-card"></div>
                <div class="share-buttons">
                    <button onclick="downloadShareCard()" class="btn-primary">
                        <i class="fa-solid fa-download"></i> Download Image
                    </button>
                    <button onclick="copyShareText()" class="btn-secondary">
                        <i class="fa-solid fa-copy"></i> Copy Text
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overall AI Analysis Modal -->
    <div id="overallAIModal" class="modal">
        <div class="modal-content modal-xl">
            <div class="modal-header">
                <h3><i class="fa-solid fa-brain"></i> AI Complete Analysis & Recommendations</h3>
                <button onclick="closeOverallAIModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div id="overallAIContent"></div>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <canvas id="confetti" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="script.js"></script>
    <div id="editCourseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Mata Kuliah</h3>
                <button onclick="closeEditCourseModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nama Mata Kuliah</label>
                    <input type="text" id="editCourseName" placeholder="Masukkan Nama Mata Kuliah">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>SKS</label>
                        <input type="number" id="editCourseSKS" min="1" max="6" placeholder="3">
                    </div>
                    <div class="form-group">
                        <label>Nilai</label>
                        <select id="editCourseGrade">
                            <option value="">Pilih Nilai</option>
                            <option value="4.0">A (4.0)</option>
                            <option value="3.7">A- (3.7)</option>
                            <option value="3.3">B+ (3.3)</option>
                            <option value="3.0">B (3.0)</option>
                            <option value="2.7">B- (2.7)</option>
                            <option value="2.3">C+ (2.3)</option>
                            <option value="2.0">C (2.0)</option>
                            <option value="1.7">C- (1.7)</option>
                            <option value="1.3">D+ (1.3)</option>
                            <option value="1.0">D (1.0)</option>
                            <option value="0.0">E (0.0)</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeEditCourseModal()" class="btn-secondary">Batal</button>
                <button onclick="saveEditCourse()" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Semester Notes Modal -->
    <div id="notesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Catatan Semester <span id="notesSemesterNum"></span></h3>
                <button onclick="closeNotesModal()" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>üìù Catatan</label>
                    <textarea id="semesterNote" rows="4" placeholder="Tulis catatan tentang semester ini..."></textarea>
                </div>
                <div class="form-group">
                    <label>üè∑Ô∏è Tags (pisahkan dengan koma)</label>
                    <input type="text" id="semesterTags" placeholder="produktif, organisasi, challenging">
                </div>
                <div class="form-group">
                    <label>üí° Lesson Learned</label>
                    <textarea id="semesterLesson" rows="3" placeholder="Apa yang dipelajari dari semester ini?"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeNotesModal()" class="btn-secondary">Batal</button>
                <button onclick="saveSemesterNotes()" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>